# kjudge

## Project Goals

- As lightweightedly deployable as possible (single binary, minimal dependencies)
- User friendly
- Doesn't get in the way (take minimal resources)

## Runtime dependencies

It should run on all platforms Go compiles to.

Required binaries:
- [`isolate`](https://github.com/ioi/isolate): The recommended sandbox.
This is actually *optional*, however the only alternate sandbox implementation
available (as of now) is the **raw** sandbox, which **DOES NOT PROVIDE ANY 
GUARDS AGAINST FOREIGN CODE** (which makes it okay to run when you are the 
only user). 
`isolate` is available on Linux systems only.

## Command line switches

```sh
> ./kjudge --help
Usage of ./kjudge:
  -file string
    	Path to the database file (default "kjudge.db")
  -sandbox string
    	The sandbox implementation to be used (isolate, raw). If anything other than 'raw' is given, isolate is used. (default "isolate")
```

## Build Instructions

External Dependencies:

```yaml
cc:      anything that compiles SQLite 3
go:      >= 1.13
node.js: >= 9
yarn:    >= 1
```

Build steps:

```sh
./production_build.sh
```

## Directory Structure

```yaml
assets:   # Static assets that gets compiled into the binary
    - sql # SQL migration schemas
cmd:          # Main commands
    - kjudge  # Main compile target
db # Database interaction library
models:          # Database entities 
    - generate   # Generator for models
    - verify     # Model verification helpers
static # [GENERATED BY FILEB0X]
templates:  # Template files and front-end related source codes
    - html  # HTML [template] files
    - css   # CSS files
    - ts    # TypeScript files
worker:        # Automatic judging logic 
    - raw      # Raw and isolate are 2 sandbox implementations
    - isolate
```
